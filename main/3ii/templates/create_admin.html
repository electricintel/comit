{{define "head"}}
	<title>{{ .Title}}</title>
{{end}}

{{define "body"}}
	<div class="container">
		<h5 class="my-header" id="dept-label">department</h5>
		<select id="dept">
			<option value="">--</option>
			<option value="general">general</option>
			<option value="infrastructure">infrastructure</option>
			<option value="sanitation">sanitation</option>
		</select>
		<br><br>
		<h5 class="my-header" id="position-label">position</h5>
		<input type="text" class="my-input" id="position"></input>
		<br><br>
		<h5 class="my-header">passphrase</h5>
		<input type="password" id="passphrase" class="my-input"></input>
		<br><br>
		<button type="button" id="create-admin" class="my-button">create admin</button>
		<br><br>
		<p id="keys" style="display: hidden;"></p>
	</div>
	<script type="text/javascript">
		$(function() {
			var socket = io();
			$('#create-admin').bind('click', function() {
				var valid_entry = true;
				var dept = $('#dept').val();
				if (dept == null) {
					$('#dept-label').html("<span style='color:red;'>select department</span>"); 
					valid_entry = false;
				}
				var position = $('#position').val();
				if (position == null) {
					$('#position-label').html("<span style='color:red;'>enter position</span>");
					valid_entry = false;
				}
				var passphrase = $('#passphrase').val();
				if (passphrase == null) {
					$('#passphrase-label').html("<span style='color:red;'>enter passphrase</span>");
					valid_entry = false;
				}
				if (valid_entry) {
					$('#dept-label').html("<span style='color:black;'>department</span>"); 
					$('#position-label').html("<span style='color:black;'>position</span>")
					$('#passphrase-label').html("<span style='color:black;'>passphrase</span>");
					socket.emit('create-admin', dept, position, passphrase)
					socket.on('admin-keys-msg', function(msg) {
						$('#keys').show(100, "linear").html(msg)
					})
				}
			})
		})
	</script>
{{end}}