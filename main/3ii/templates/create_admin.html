{{define "head"}}
	<title>{{ .Title}}</title>
{{end}}

{{define "body"}}
	<div class="container">
		<h5 class="my-header" id="dept-label">department</h5>
		<select id="dept">
			<option value="">--</option>
			<option value="general">general</option>
			<option value="infrastructure">infrastructure</option>
			<option value="sanitation">sanitation</option>
		</select><br>
		<h5 class="my-header" id="services-label">services</h5>
		<select id="services" multiple></select>
		<h5 class="my-header">passphrase</h5>
		<input type="password" id="passphrase" class="my-input"></input><br><br>
		<button type="button" id="create-admin" class="my-button">create admin</button><br><br>
		<p id="keys" style="display: hidden;"></p>
	<script type="text/javascript">
		$(function() {
			var socket = io();
			$('#dept').on('change', function() {
				socket.emit('select-dept', $('#dept').val())
				socket.on('services', function(msg) {
					document.getElementById('services').innerHTML = msg
				})
			})
			$('#create-admin').bind('click', function() {
				var valid_entry = true
				var dept = $('#dept').val();
				if (dept.length == 0) {
					$('#dept-label').html("<span style='color:red;'>select department</span>"); 
					valid_entry = false
				}
				var services = $('#services').val();
				if (services.length == 0) {
					$('#services-label').html("<span style='color:red;'>select services</span>")
					valid_entry = false
				}
				var passphrase = $('#passphrase').val();
				if (passphrase.length == 0) {
					$('#passphrase-label').html("<span style='color:red;'>enter passphrase</span>")
					valid_entry = false
				}
				if (valid_entry) {
					$('#dept-label').html("<span style='color:black;'>department</span>"); 
					$('#services-label').html("<span style='color:black;'>services</span>")
					$('#passphrase-label').html("<span style='color:black;'>passphrase</span>");
					socket.emit('create-admin', dept, services, passphrase)
					socket.on('admin-keys-msg', function(msg) {
						$('#keys').show(100, "linear").html(msg)
					})
				}
			})
		})
	</script>
{{end}}